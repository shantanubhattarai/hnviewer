(this.webpackJsonphnviewer=this.webpackJsonphnviewer||[]).push([[0],{21:function(t,e,n){t.exports=n(33)},26:function(t,e,n){},27:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),c=n(19),i=n.n(c),o=(n(26),n(13)),r=n(1),l=(n(27),n(9)),m=n(7),u=n(8),h=n(11),f=n(10),p=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).componentDidMount=function(){t.fetchCommentDetails(t.props.id)},t.fetchCommentDetails=function(e){t.setState({isLoading:!0}),fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json")).then((function(t){return t.json()})).then((function(e){return t.setState({commentDetails:e,isLoading:!1})})).then((function(){return t.fetchSubComments()}))},t.fetchSubComments=function(){t.state.commentDetails.kids&&t.state.commentDetails.kids.forEach((function(e){fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json")).then((function(t){return t.json()})).then((function(e){return t.setState({comments:[].concat(Object(l.a)(t.state.comments),[e])})}))}))},t.state={commentDetails:{},comments:[],isLoading:!1},t}return Object(u.a)(n,[{key:"render",value:function(){return s.a.createElement("li",{key:this.props.id},this.state.isLoading&&s.a.createElement("p",{className:"loader-container"},s.a.createElement("span",{className:"loader"})),this.state.commentDetails.deleted&&s.a.createElement("span",{className:"deleted"},"deleted"),s.a.createElement("p",{className:"comment-user"},this.state.commentDetails.by),s.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.commentDetails.text}}),s.a.createElement("ul",null,this.state.comments.map((function(t){return s.a.createElement(n,{key:t.id,id:t.id})}))))}}]),n}(s.a.Component),d=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var a;return Object(m.a)(this,n),(a=e.call(this,t)).componentDidMount=function(){a.fetchStoryDetails(a.props.match.params.id)},a.fetchStoryDetails=function(t){fetch("https://hacker-news.firebaseio.com/v0/item/".concat(t,".json")).then((function(t){return t.json()})).then((function(t){return a.setState({storyDetails:t})})).then((function(){return a.fetchComments()}))},a.fetchComments=function(){a.state.storyDetails.kids&&a.state.storyDetails.kids.forEach((function(t){fetch("https://hacker-news.firebaseio.com/v0/item/".concat(t,".json")).then((function(t){return t.json()})).then((function(t){return a.setState({comments:[].concat(Object(l.a)(a.state.comments),[t])})}))}))},a.state={storyDetails:{},comments:[]},a}return Object(u.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("a",{href:this.state.storyDetails.url,className:"story-title"},this.state.storyDetails.title),s.a.createElement("ul",null,this.state.comments.map((function(t){return s.a.createElement(p,{key:t.id,id:t.id})}))))}}]),n}(s.a.Component),E=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(m.a)(this,n),(t=e.call(this)).componentDidMount=function(){t.fetchStories()},t.fetchStories=function(){t.setState({isLoading:!0}),fetch("https://hacker-news.firebaseio.com/v0/topstories.json").then((function(t){return t.json()})).then((function(e){t.setState({stories:e,isLoading:!1}),t.fetchStoryDetails()}))},t.fetchStoryDetails=function(){var e=0;t.setState({isLoading:!0}),t.state.stories.slice(30*t.state.page,30*(t.state.page+1)).forEach((function(n){fetch("https://hacker-news.firebaseio.com/v0/item/".concat(n,".json")).then((function(t){return t.json()})).then((function(n){return t.setState({storyDetails:[].concat(Object(l.a)(t.state.storyDetails),[n])},(function(){++e>=29&&t.setState({isLoading:!1})}))}))}))},t.state={stories:[],storyDetails:[],isLoading:!1,page:0,itemsInPage:30},t}return Object(u.a)(n,[{key:"changePage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;0===this.state.page&&-1===e||this.state.page===Math.floor(this.state.stories.length/30)&&1===e||this.setState({page:this.state.page+e},(function(){t.fetchStoryDetails()}))}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"paginate"},s.a.createElement("div",{className:"btn-container"},s.a.createElement("button",{className:"page-btn",onClick:function(){return t.changePage(-1)}},"Prev"),s.a.createElement("span",{className:"page-display"},this.state.page+1),s.a.createElement("button",{className:"page-btn",onClick:function(){return t.changePage(1)}},"Next"))),s.a.createElement("ul",null,this.state.storyDetails.slice(30*this.state.page,30*(this.state.page+1)).map((function(t){return s.a.createElement("li",{key:t.id},s.a.createElement("a",{href:t.url,className:"story-title"},t.title),s.a.createElement(o.b,{to:"/story/".concat(t.id),className:"comment-link"},"Comments"))}))),this.state.isLoading&&s.a.createElement("p",{className:"loader-container"},s.a.createElement("span",{className:"loader"})))}}]),n}(s.a.Component);var g=function(){return s.a.createElement("div",{className:"container"},s.a.createElement("h1",null,"HN Viewer"),s.a.createElement(o.a,null,s.a.createElement(r.c,null,s.a.createElement(r.a,{path:"/story/:id",component:d}),s.a.createElement(r.a,{path:"/"},s.a.createElement(E,null)))))};i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(g,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.172265f7.chunk.js.map